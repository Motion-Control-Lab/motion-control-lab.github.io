<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<title>Side Warehouse of Laboratory</title>
<head>
	<link rel=stylesheet type="text/css" href="normalpage.css" />
</head>
<body>

	<!---// 陦ｨ鬘後Ξ繧､繝､繝ｼ //--->
	<DIV class="toplayer">
		<font size=6><b>dsPIC 繝ｪ繧｢繝ｫ繧ｿ繧､繝�蛻ｶ蠕｡</b></font>
		<a href="index.html"><DIV class="frontpagebutton"><b>FRONT PAGE</b></DIV></a>
	</DIV>

	<!---// 讓ｪ蟶ｯ繝ｬ繧､繝､繝ｼ //--->
	<DIV class="sidelayer"></DIV>

	<!---// 譛ｬ譁�繝ｬ繧､繝､繝ｼ //--->
	<DIV class="mainlayer">
		<br>
		<font size=4><b>繧ｳ繝ｬ縺ｯ菴包ｼ�/What is this?</b></font><br>
			<p style="margin-left: 1em">
				dsPIC繧剃ｽｿ縺｣縺ｦ�ｼ後Μ繧｢繝ｫ繧ｿ繧､繝�蛻ｶ蠕｡繧偵＠縺ｾ縺吶��
				<b>譛ｬ繧ｵ繧､繝医〒縺ｯ<font color=#DD0000><u>繧｢繧ｻ繝ｳ繝悶Λ</u></font>縺ｧ陦後″縺ｾ縺吶��</b><br>
				dsPIC縺ｮC險�隱槭�ｮ諠�蝣ｱ縺ｯ螟ｧ驥上↓縺ゅｋ縺ｮ縺ｧ縺吶′�ｼ後い繧ｻ繝ｳ繝悶Λ縺ｮ諠�蝣ｱ縺ｯ縺九↑繧雁ｰ代↑縺�縺ｮ縺ｧ�ｼ悟峅縺｣縺ｦ縺�繧倶ｺｺ縺ｮ蜉ｩ縺代↓縺ｪ繧後�ｰ蟷ｸ縺�縺ｧ縺吶��<br>
				C繧ｳ繝ｳ繝代う繝ｩ縺ｯ辟｡蜆溘〒菴ｿ縺医※繧よｩ溯�ｽ蛻ｶ髯舌′縺ゅｋ繧医≧縺ｧ縺吶′�ｼ後い繧ｻ繝ｳ繝悶Λ縺ｪ繧峨◎繧薙↑縺薙→繧呈ｰ励↓縺吶ｋ蠢�隕√�ｯ縺ゅｊ縺ｾ縺帙ｓ縲�<br>
				縺企�代′縺ｪ縺代ｌ縺ｰ遏･諱ｵ縺ｧ蜍晁ｲ�縺ｧ縺吶��<br>
				縺薙％縺ｧ邏ｹ莉九☆繧九�ｮ縺ｯ�ｼ後ち繧､繝槫牡繧願ｾｼ縺ｿ縺ｨ蠕�讖溘Ν繝ｼ繝√Φ縺ｧ繝ｪ繧｢繝ｫ繧ｿ繧､繝�諤ｧ繧堤｢ｺ菫昴☆繧狗ｰ｡蜊倥↑繧ｳ繝ｼ繝峨〒縺吶��
			</p>
		<br>
		<br>
		<font size=4><b>繝�繧ｦ繝ｳ繝ｭ繝ｼ繝�/Download</b></font><br>
			<p style="margin-left: 1em">
			dsPIC縺ｮ繧ｽ繝ｼ繧ｹ繧ｳ繝ｼ繝峨�ｯ莉･荳九°繧峨ム繧ｦ繝ｳ繝ｭ繝ｼ繝峨〒縺阪∪縺吶��<br>
			You can download the source code of dsPIC.<br>
			</p>
			<blockquote>
				<a href="realtime.s">realtime.s</a><br>
			</blockquote>
			<p style="margin-left: 1em">
			MPLAB IDE 縺翫ｈ縺ｳ dsPIC30F4012 螳滓ｩ滉ｸ翫〒蜍穂ｽ懃｢ｺ隱肴ｸ医∩縺ｧ縺吶��<br>
			We confirmed that this source code was normally operated in MPLAB IDE and dsPIC30F4012.<br>
			</p>
		<br>
		<br>
		<font size=4><b>繧ｽ繝ｼ繧ｹ繧ｳ繝ｼ繝�/Source code</b></font> (<u>2012/01/20 繧医ｊ豢礼ｷｴ縺輔ｌ縺溘さ繝ｼ繝峨↓菫ｮ豁｣</u>) <br>
			<p style="margin-left: 1em">
			<blockquote><pre>
<font color=#008000>;</font>
<font color=#008000>;  dsPIC30F4012 REAL TIME CONTROL(TIMER INTERRUPT) TEST CODE</font>
<font color=#008000>;</font>

<font color=#0000EE>.include</font> "p30f4012.inc"

<font color=#008000>; 險ｭ螳�</font>
<font color=#0000EE>config</font> __FOSC, CSW_FSCM_OFF & EC_PLL16  <font color=#008000>; ClockSW OFF, 螟夜ΚClock PLL16蛟阪Δ繝ｼ繝�</font>
<font color=#0000EE>config</font> __FWDT, WDT_OFF                  <font color=#008000>; WatchdogTimer OFF</font>
<font color=#0000EE>config</font> __FBORPOR, PBOR_ON & BORV20 & PWRT_16 & MCLR_EN
<font color=#008000>; 髮ｻ貅先兜蜈･譎り�ｪ蜍輔Μ繧ｻ繝�繝域怏蜉ｹ, 閾ｪ蜍募●豁｢髮ｻ蝨ｧ2.0V, 髮ｻ貅先兜蜈･繧ｿ繧､繝�16msec, MCLR繝斐Φ譛牙柑</font>
<font color=#0000EE>config</font> __FGS, CODE_PROT_OFF             <font color=#008000>; CodeProtection OFF</font>

<font color=#008000>; 繝ｫ繝ｼ繝√Φ</font>
<font color=#0000EE>.global</font> __T1Interrupt       <font color=#008000>; 蜑ｲ繧願ｾｼ縺ｿ繝ｫ繝ｼ繝√Φ</font>
<font color=#0000EE>.global</font> __reset             <font color=#008000>; 蛻晄悄險ｭ螳壹Ν繝ｼ繝√Φ</font>

<font color=#008000>; dsPIC襍ｷ蜍暮幕蟋�</font>
<font color=#0000EE>.text</font>
<font color=#0000EE>.org</font>    0x000000
    <font color=#0000EE>goto</font>    __reset         <font color=#008000>; 襍ｷ蜍暮幕蟋九→蜈ｱ縺ｫ蛻晄悄險ｭ螳壹ｒ陦後≧</font>

<font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繝吶け繧ｿ</font>
__T1Interrupt:
    <font color=#0000EE>goto</font>    T1Interrupt

<font color=#008000>; 蛻晄悄險ｭ螳壹Ν繝ｼ繝√Φ</font>
__reset:
    <font color=#008000>; I/O繝昴�ｼ繝亥�･蜃ｺ蜉幄ｨｭ螳�</font>
    <font color=#0000EE>mov</font>     #0b0000000000000000,w0
    <font color=#0000EE>mov</font>     w0,TRISB
    <font color=#0000EE>mov</font>     #0b0000000000000000,w0
    <font color=#0000EE>mov</font>     w0,TRISC
    <font color=#0000EE>mov</font>     #0b0000000000000000,w0
    <font color=#0000EE>mov</font>     w0,TRISD
    <font color=#0000EE>mov</font>     #0b0000000000000000,w0
    <font color=#0000EE>mov</font>     w0,TRISE
    <font color=#0000EE>mov</font>     #0b0000000000000000,w0
    <font color=#0000EE>mov</font>     w0,TRISF
    
    <font color=#008000>; 繧ｿ繧､繝�1蜑ｲ繧願ｾｼ縺ｿ險ｭ螳�</font>
    <font color=#0000EE>clr</font>     T1CON           <font color=#008000>; 蛻ｶ蠕｡繝ｬ繧ｸ繧ｹ繧ｿ險ｭ螳�</font>
    <font color=#0000EE>clr</font>     TMR1            <font color=#008000>; 繧ｿ繧､繝槭Ξ繧ｸ繧ｹ繧ｿ繧ｯ繝ｪ繧｢</font>
    <font color=#0000EE>mov</font>     <font color=#DD0000><u>#0x0BB7</u></font>, w0     <font color=#008000>; 蜻ｨ譛溘Ξ繧ｸ繧ｹ繧ｿ縺ｮ險ｭ螳� 0x0BB7=100ﾎｼs (120MHz)</font>
    <font color=#0000EE>mov</font>     w0,     PR1     <font color=#008000>; </font>
    <font color=#0000EE>bset</font>    IPC0,   #T1IP0  <font color=#008000>; 繧ｿ繧､繝�1蜑ｲ繧願ｾｼ縺ｿ險ｭ螳�</font>
    <font color=#0000EE>bclr</font>    IPC0,   #T1IP1  <font color=#008000>; 蜆ｪ蜈亥ｺｦ繧�</font>
    <font color=#0000EE>bclr</font>    IPC0,   #T1IP2  <font color=#008000>; 譛�鬮倥↓險ｭ螳�</font>
    <font color=#0000EE>bclr</font>    IFS0,   #T1IF   <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繝輔Λ繧ｰ繧偵け繝ｪ繧｢</font>
    <font color=#0000EE>bset</font>    IEC0,   #T1IE   <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繧定ｨｱ蜿ｯ</font>
    <font color=#0000EE>bset</font>    T1CON,  #TON    <font color=#008000>; 繧ｿ繧､繝�1蟋句虚</font>
    
    
<font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ蠕�讖溘Ν繝ｼ繝√Φ</font>
<font color=#008000>; 縺薙�ｮ繝ｫ繝ｼ繝√Φ縺ｯ繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ縺檎匱逕溘☆繧九∪縺ｧ蠕�讖溘☆繧九Ν繝ｼ繝√Φ</font>
INT_WAIT:
    <font color=#0000EE>nop</font>
    <font color=#0000EE>goto</font>    INT_WAIT        <font color=#008000>; 荳ｻ繝ｫ繝ｼ繝√Φ蜈磯�ｭ縺ｫ謌ｻ繧�</font>

<font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繝ｫ繝ｼ繝√Φ</font>
T1Interrupt:
    <font color=#0000EE>bclr</font>    IEC0,   #T1IE   <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繧堤ｦ∵ｭ｢</font>
    <font color=#0000EE>call</font>    PERIOD          <font color=#008000>; 蜻ｨ譛溘Ν繝ｼ繝√Φ蜻ｼ縺ｳ蜃ｺ縺�</font>
    <font color=#0000EE>bclr</font>    IFS0,   #T1IF   <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繝輔Λ繧ｰ繧偵Μ繧ｻ繝�繝�</font>
    <font color=#0000EE>bset</font>    IEC0,   #T1IE   <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ繧定ｨｱ蜿ｯ</font>
    <font color=#0000EE>retfie</font>                  <font color=#008000>; 繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ邨ゆｺ�</font>


<font color=#008000>; 蜻ｨ譛溘Ν繝ｼ繝√Φ</font>
<font color=#008000>; 縺薙�ｮ繝ｫ繝ｼ繝√Φ縺ｯ100ﾎｼs縺斐→縺ｫ螳溯｡後＆繧後ｋ縲ょ�ｦ逅�縺ｯ3000step莉･蜀�縺ｫ邏阪ａ繧九％縺ｨ縲�(120MHz)</font>
PERIOD:
    <font color=#008000>; 縺薙％縺ｫ謇�譛帙�ｮ蛻ｶ蠕｡繧ｳ繝ｼ繝峨ｒ譖ｸ縺�</font>
    <font color=#0000EE>com.b</font>   PORTE           <font color=#008000>; 100ﾎｼs豈弱↓PORTE繧貞渚霆｢</font>
    <font color=#0000EE>return</font>

<font color=#0000EE>.end</font>
			</pre></blockquote>
			</p>
		<br>
		<br>
		<font size=4><b>隗｣隱ｬ/Manual</b></font><br>
			<p style="margin-left: 1em">
				蜍穂ｽ懊�ｯ讎ゅ�ｭ莉･荳九�ｮ騾壹ｊ縲�
				<blockquote>
					�ｼ托ｼ仕sPIC襍ｷ蜍慕峩蠕後↓繝昴�ｼ繝亥�･蜃ｺ蜉幄ｨｭ螳壹→繧ｿ繧､繝槫牡繧願ｾｼ縺ｿ縺ｮ險ｭ螳壹ｒ螳溯｡後☆繧�<br>
					�ｼ抵ｼ主ｾ�讖溘Ν繝ｼ繝√Φ縺ｧ辟｡髯舌Ν繝ｼ繝励↓蜈･繧�<br>
					�ｼ難ｼ弱ち繧､繝槫牡繧願ｾｼ縺ｿ縺梧寺縺九▲縺溘ｉ�ｼ鯉ｼ斐∈<br>
					�ｼ費ｼ主捉譛溘Ν繝ｼ繝√Φ(謇�譛帙�ｮ繧ｳ繝ｼ繝峨′譖ｸ縺�縺ｦ縺ゅｋ)繧貞ｮ溯｡後＠�ｼ鯉ｼ偵∈謌ｻ繧�<br>
				</blockquote>
				縺薙ｌ縺ｧ蜻ｨ譛溘Ν繝ｼ繝√Φ縺ｮ蜃ｦ逅�蜀�螳ｹ繝ｻ貍皮ｮ苓ｲ�闕ｷ縺ｫ髢｢繧上ｉ縺夲ｼ梧欠螳壹＠縺溷宛蠕｡蜻ｨ譛溘ｒ螳医ｋ縺薙→縺後〒縺阪∪縺吶��<br>
				縺溘□縺暦ｼ悟宛蠕｡蜻ｨ譛滉ｻ･蜀�縺ｧ邨ゅｏ繧九ｈ縺�縺ｪ繧ｹ繝�繝�繝玲焚縺ｫ縺吶ｋ蠢�隕√′縺ゅｊ縺ｾ縺吶��<br>
			</p>
		<br>
		<br>
		<font size=4><b>蛻ｶ蠕｡蜻ｨ譛溘�ｮ隱ｿ謨ｴ/Adjustment of Control Period</b></font><br>
			<p style="margin-left: 1em">
				豁｣遒ｺ縺ｪ蛻ｶ蠕｡蜻ｨ譛溘ｒ蠕励ｋ縺溘ａ縺ｫ�ｼ悟ｮ滓ｩ溘ｒ菴ｿ縺｣縺ｦ繝代Λ繝｡繝ｼ繧ｿ縺ｮ隱ｿ謨ｴ繧定｡後＞縺ｾ縺吶��<br>
				荳願ｿｰ縺励◆繧ｽ繝ｼ繧ｹ繧ｳ繝ｼ繝峨〒縺ｯ�ｼ訓ORTE繧貞宛蠕｡蜻ｨ譛溘＃縺ｨ縺ｫ蜿崎ｻ｢縺輔○繧九ｈ縺�縺ｫ縺ｪ縺｣縺ｦ縺�縺ｾ縺吶��<br>
				繧ｪ繧ｷ繝ｭ繧ｹ繧ｳ繝ｼ繝励〒PORTE縺九ｉ蜃ｺ蜉帙＆繧後ｋ譁ｹ蠖｢豕｢繧定ｦｳ貂ｬ縺暦ｼ�<br>
				繧ｽ繝ｼ繧ｹ繧ｳ繝ｼ繝峨�ｮ<font color=#DD0000><u>襍､邱壹�ｮ驛ｨ蛻�</u></font> 縺ｮ蜻ｨ譛溘Ξ繧ｸ繧ｹ繧ｿ縺ｮ險ｭ螳壹�ｮ縺ｨ縺薙ｍ繧定ｪｿ謨ｴ縺励∪縺吶��
				
			</p>
		<br>
		<br>
		<br><br><br><br>
		<center>
			<font size=2>
				- <?php include('./counter/count.php'); ?> -<br>
				<br>
				遐皮ｩｶ螳､縺ｮ讓ｪ縺ｮ蛟牙ｺｫ - Side Warehouse of Laboratory<br>
				Copyright(C), Side Warehouse, All rights reserved.
			</font>
		</center>
	</DIV>
</html>
